{
  "name": "Research Tool â€” Web Search (Google + Bing)",
  "nodes": [
    {"parameters": {"path": "research/tools/web-search", "responseCode": 200}, "id": "Webhook", "name": "Webhook", "type": "n8n-nodes-base.webhook", "typeVersion": 1, "position": [200, 140]},
    {"parameters": {"functionCode": "const b=$json||{};const q=b.query||b.q;const limit=Number(b.limit||5);if(!q)throw new Error('query required');return [{json:{q,limit}}];"}, "id": "Normalize", "name": "Normalize", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [460, 140]},

    {"parameters": {"url": "=https://www.googleapis.com/customsearch/v1", "options": {}, "sendQuery": true, "queryParametersUi": {"parameter": [
      {"name": "key", "value": "={{$env.GOOGLE_API_KEY}}"},
      {"name": "cx", "value": "={{$env.GOOGLE_CSE_ID}}"},
      {"name": "q", "value": "={{$json.q}}"},
      {"name": "num", "value": "={{$json.limit}}"}
    ]}}, "id": "Google", "name": "Google CSE", "type": "n8n-nodes-base.httpRequest", "typeVersion": 1, "position": [740, 60]},

    {"parameters": {"url": "=https://api.bing.microsoft.com/v7.0/search", "options": {"headers": {"entries": [{"name": "Ocp-Apim-Subscription-Key", "value": "={{$env.BING_API_KEY}}"}]}}, "sendQuery": true, "queryParametersUi": {"parameter": [
      {"name": "q", "value": "={{$json.q}}"},
      {"name": "count", "value": "={{$json.limit}}"}
    ]}}, "id": "Bing", "name": "Bing Web Search", "type": "n8n-nodes-base.httpRequest", "typeVersion": 1, "position": [740, 220]},

    {"parameters": {"functionCode": "// Combine results into a common format\nconst google = items[0]?.json||{};\nconst bing = items[1]?.json||{};\nconst out=[];\n// Google items\nif (google.items) { for (const it of google.items) { out.push({ source:'google', title:it.title, url:it.link, snippet:it.snippet }); } }\n// Bing webPages\nif (bing.webPages && bing.webPages.value) { for (const it of bing.webPages.value) { out.push({ source:'bing', title:it.name, url:it.url, snippet:it.snippet||it.description }); } }\nreturn [{ json: { query: $json.q, results: out } }];"}, "id": "Combine", "name": "Combine Results", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [980, 140]},

    {"parameters": {"functionCode": "return [{ json: { query: $json.query, results: $json.results } }];"}, "id": "Respond", "name": "Respond", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [1220, 140]}
  ],
  "connections": {
    "Webhook": {"main": [[{"node": "Normalize", "type": "main", "index": 0}]]},
    "Normalize": {"main": [[{"node": "Google", "type": "main", "index": 0}], [{"node": "Bing", "type": "main", "index": 0}]]},
    "Google": {"main": [[{"node": "Combine Results", "type": "main", "index": 0}]]},
    "Bing": {"main": [[{"node": "Combine Results", "type": "main", "index": 0}]]},
    "Combine Results": {"main": [[{"node": "Respond", "type": "main", "index": 0}]]}
  },
  "settings": {"executionOrder": "v1"},
  "tags": ["research", "search"],
  "versionId": "research-web-search-v1"
}
